# Глобальные

[v] Рисовать произвольные фигуры в matplotlib
[v] Генерировать json с описанием зон резонатора и рабочей области
[v] Генерация резонатора сдвинутого и повернутого на произвольный угол внутри рабочей области
[v] Определение зоны в по координате точки
[v] Преобразование глобальных координат в локальные для рабочей области
[v] Модель мишени, разбитой на произвольное количество прямоугольных чанков
    [v] Нарисовать мишень
    [v] Преобразование глобальной координаты в локальную и определение чанка (луч нулевой тощины)
    [v] Симуляция изменения частоты резонатора при испарении серебра из чанка, вычисление общего изменения частоты
    [v] Модель нагревания чанка лучом, испарение покрытия
    [v] Определение суммарной потери покрытия мишенью
    [v] Сборка состовляющих модели воедино
[v] Создание симуляции движения луча станком
    [v] Перенести упрощенный интерполятор из `OPAL-rust`
    [v] Создать обертку над рабочей зоной, чтобы согласовать координаты и скорость перемещения со станком
[v] Создание нейронной сети для управления настройкой резонатора
    [v] Определить выходные параметры сети
    [v] Создать заглушку, которая будет выдавать случайные числа в качестве выходных параметров и протестировать первую итерацию симуляции
    [v] Определеить входные параметры сети
    [v] Заменить заглушку на нейронную сеть
[v] Создание замкнутой симуляции процесса настройки для обучения сети методом искуственного отбора (генетический алгоритм)
[v] Отладка симуляции
    [v] Добавить к входным параметрам нейронной сети текущую цель движения
    [v] Профилирование
        ```
        WARNING:tensorflow:5 out of the last 13 calls to <function Model.make_predict_function.<locals>.predict_function at 0x000001C2B9C82680> triggered tf.function retracing. 
        Tracing is expensive and the excessive number of tracings could be due to 
        (1) creating @tf.function repeatedly in a loop, 
        (2) passing tensors with different shapes, 
        (3) passing Python objects instead of tensors. 
        For (1), please define your @tf.function outside of the loop. 
        For (2), @tf.function has reduce_retracing=True option that can avoid unnecessary retracing. 
        For (3), please refer to https://www.tensorflow.org/guide/function#controlling_retracing and https://www.tensorflow.org/api_docs/python/tf/function for  more details.
        ```
    [v] Проверка на корректность
    [v] Сохранять параметры симуляции, угол, смещение и перестройку частоты
[v] Сохранение промежуточных результатов симуляции в файл
    [v] Возобновление симуляции из файла
    [v] Загрузка индивидуума в визуальную симуляцию
[v] Оптимизация обучения: передавать на расчета нейронной сети не вектор а матрицу, где:
    * Текущая позиция - заранее рассчитана с шагом, равным шагу моделирования до следующего момента "измеренгия частоты" **ИЛИ** конца движения
    - История движения длиной Nm
    - История F, S - Одинаковы во всех строках
    - Точка назначения одинакова во всех строках
    - История изменения частоты одинакова во всех строках
[v] Чтение cатаиcтики обучения из файла
    [v] Визуализация статистики обучения
[v] Загрузка индивидуумов из статистики обучения и проверка их в "вживую"

[x] Поэтапное введение оценок в симуляцию, добавлять каждые 50 поколений
    - Оценивать только изменение частоты
    - добавить штраф за попадание в запрещенную зону
    - добавить дисбалланс
    - добавить самооценку
    - добавить штраф за перегрев
    - добавить бонус за скорость перемещения
    - добавить штраф за время работы
    - добавить штраф за причину остановки
    Работает неочень, отключил. Нейросеть учится угадывать универсальное направление как порезать за 1 раз и сразу стоп

[v] Ввезти счетчик энергии и добавлять её если есть изменение частоты и тратить её на перемещение
    [v] Предоставить нейросети текущее значение энергии
    [v] Расход энергии на движение + фмксированный расход на шаг
    [v] Добавлении порции энергии если частота изменилась вверх

[v] Добавить бонус длину пройденного пути - стало лучше!
[v] Добавить бонус за остаток энергии
[v] Добавить генерацию резонатора со случайной толщиной покрытия
    [v] Записывать толщину в результаты симуляции
[v] Нелинейный штраф за неточность настройки и дисбаланс

[v] Пробовать отключать некторые критерии (50 поколений)
    [v] Дефолт - хороший результат, есть потенцеал для дальнейшего обучения
    [v] Отключить оценка за причину остановки - удовлетворительный результат, вместо настройки продляла себе жизнь нагревом резонатора
    [v] Отключить бонус за остаток энергии - получился довольно хороший но коротки путь, нелинейная функция штрафа за настройку не дала бонуса из-за малой перестройки частоты
    [x] Отключить бонус за дину пройденнго пути - выраждение в 1 росчерк - совсем плохо
    [v] Отключить относительное время симуляции - хороший результат, есть потенциал для дальнейшего обучения
    [x] Отключить средняя скорость движения - Вместо настройки продляла себе жизнь нагревом резонатора
    [x] Отключить максимальная достигнутая температура - близко к вырождению
    [x] Отключить точность самооценки - не очень но не вырождено
    [x] Отключить относительный диссбаланс - Настраивает, но много заходов в запрещенную зону, есть потенциал обучения
    [x] Отключить относительный штраф за попадание куда не надо - Настраивает, но много заходов в запрещенную зону
    [x] Отключить относительный штраф за неточность настройки - как и ожидалось - плохо

[v] Время на входе нейросети некорретно, привезти к 0..1
[v] Разнообразие начального отклонения, что все 0.5 то?
[v] Оценка: доп бонусы только если настрока прошла успешно
[v] Добавить историю измерений в версию 4
[v] Добавить историю перемещений в версию 4

[v] Версия 5
    [v] Играбельный прототип
    [v] Контроллер
    [v] Награда непонятно за что во время остывания - починить
    [v] Обучение

[v] Версия 6
    [v] Симуляция. Зменение угла реза
    [v] Играбельный прототип
    [v] Контроллер
[v] Полный цыкл поиска наклона резонатора
[v] Хранить историю частот для последующего анализа
[v] Не "измерять" частоту при вызове `_get_obs`, а считать её из истории
[_] Подготовить к многопоточному запуску
[_] Выполнить многочисленные симуляции, собрать метрики
[v] Добавить настраиваемый шум в измерения
[_] Выполнить симуляции с разными параметрами и оценить оптимальные значения

# Локальные
[v] Замена ручной генерации матриц преобразования на `matplotlib.transforms.Affine2D`
[v] Создать файл requrments.txt
    * https://github.com/joliveros/keras-rl2.git
    * alog
    * keras
    * gymnasium
    * numpy
    * matplotlib